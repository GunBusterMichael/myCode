<!DOCTYPE html>
<html lang="zh-cmn-Hans">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>创建类和对象</title>
</head>

<body>
    <script>

        /* 
            创建类 class：
                1. 类中的所有函数不用写 function；
                2. 类中不可添加逗号来分割不同函数
        */
        class Star {

            /*
                构造函数 constructor()：用于接收参数，返回实例对象。
                    如果不写构造函数，类也会自动生成构造函数。
            */
            constructor(uname, age) {
                // this 指向被创建的实例
                this.uname = uname    // 属性
                this.age = age    // 属性
            }
            sing(song) {    // 方法
                console.log(this.uname + '唱《' + song + '》。');
            }
        }

        /*
            利用类创建对象 object （对象的实例化）。
                会自动调用构造函数。
        */
        var carol = new Star('珈乐', 17 + 3)
        var bella = new Star('贝拉', 19)

        console.log(carol.uname);
        console.log(bella.uname);
        carol.sing('霓虹甜心')
        bella.sing('星の在り処')

        /* 
            在类内部定义的方法，都不可枚举（nonenumerable）
        */
        console.log(Object.keys(Star))    // 返回 []

        /* 
            定义在 this 上的属性，可在实例中被枚举
        */
        console.log(Object.keys(carol))    // 返回 ['uname', 'age']

        /* 
            对于实例的属性和方法，除了定义在 this（实例本身）上的，
                都被定义在实例的原型上（即 class 上）
        */
        console.log(carol.hasOwnProperty('uname'))             // 返回 true
        console.log(carol.hasOwnProperty('age'))               // 返回 true
        console.log(carol.hasOwnProperty('sing'))              // 返回 false
        console.log(carol.__proto__.hasOwnProperty('sing'))    // 返回 true

        /* 
            同一个类的所有实例共用一个原型对象
        */
        console.log(carol.__proto__ === bella.__proto__)    // 返回 true
    </script>
</body>

</html>