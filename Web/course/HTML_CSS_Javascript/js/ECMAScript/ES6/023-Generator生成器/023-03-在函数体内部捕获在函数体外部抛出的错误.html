<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>023-03-在函数体内部捕获在函数体外部抛出的错误</title>
</head>
<body>
    <script>
        /* 
            Generator 函数返回的遍历器的 throw 方法
                1. 功能
                    可以在 Generator 函数体外部抛出错误，
                        然后在 Generator 函数体内部捕获。
        */
        {
            let g = function* () {
                try {
                    yield
                } catch (e) {
                    console.log('内部捕获', e)
                }
            }

            let i = g()
            i.next()

            try {
                // 被 Generator 函数内部捕获
                i.throw(new Error('第一个错误'))    // 报错 内部捕获 Error: 第一个错误


                /*
                    因为 Generator 函数内部的 catch 语句已经被执行过一次，无法再次执行；
                        所以被函数外部的 catch 语句接收
                */
                i.throw(new Error('第二个错误'))    // 报错 外部捕获 Error: 第二个错误
            } catch (e) {
                console.log('外部捕获', e)
            }
        }
    </script>
</body>
</html>