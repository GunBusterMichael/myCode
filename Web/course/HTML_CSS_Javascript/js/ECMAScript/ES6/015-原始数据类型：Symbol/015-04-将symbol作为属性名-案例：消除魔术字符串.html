<!DOCTYPE html>
<html lang="zh-cmn-Hans">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>015-04-将symbol作为属性名-案例：消除魔术字符串</title>
</head>

<body>
    <script>
        /*
            魔术字符串
                1. 定义
                    在代码中多次出现，与代码功能强相关的字符串或数值。
                2. 修改
                    应将魔术字符串改为含义清晰的变量。
        */

        // 存在魔术字符串的情况
        {
            function getArea(shape, options) {
                let area = 0

                switch (shape) {
                    case 'Triangle':    // 魔术字符串：'Triangle'
                        area = .5 * options.width * options.height
                        break;
                    case 'Rectangle':    // 魔术字符串：'Rectangle'
                        area = options.width * options.height
                        break;
                    default:
                        area = '不明图形'
                        break;
                }

                return area
            }

            console.log(getArea('Triangle', { width: 100, height: 200 }))     // 魔术字符串：'Triangle'
            console.log(getArea('Rectangle', { width: 100, height: 200 }))    // 魔术字符串：'Rectangle'
        }

        // 将魔术字符串用对象属性的方法替代
        {
            const shapeTypes = {
                triangle: 'Triangle',
                rectangle: 'Rectangle'
            }

            function getArea(shape, options) {
                let area = 0

                switch (shape) {
                    case 'Triangle':     // 魔术字符串：'Triangle'
                        area = .5 * options.width * options.height
                        break;
                    case 'Rectangle':    // 魔术字符串：'Rectangle'
                        area = options.width * options.height
                        break;
                    default:
                        area = '不明图形'
                        break;
                }

                return area
            }

            console.log(getArea('Triangle', { width: 100, height: 200 }))     // 魔术字符串：'Triangle'
            console.log(getArea('Rectangle', { width: 100, height: 200 }))    // 魔术字符串：'Rectangle'
        }

        // 将对象属性值用 Symbol 值代替
        {
            /*
                函数只用到了对象属性名，属性值是什么不重要，但要尽量不同。
?                   这种 不关注具体内容，但要求内容不同的值 ，适合用 symbol 代替。
            */
            const shapeTypes = {
                triangle: Symbol(),
                rectangle: Symbol()
            }

            function getArea(shape, options) {
                let area = 0

                switch (shape) {
                    case 'Triangle':     // 魔术字符串：'Triangle'
                        area = .5 * options.width * options.height
                        break;
                    case 'Rectangle':    // 魔术字符串：'Rectangle'
                        area = options.width * options.height
                        break;
                    default:
                        area = '不明图形'
                        break;
                }

                return area
            }

            console.log(getArea('Triangle', { width: 100, height: 200 }))     // 魔术字符串：'Triangle'
            console.log(getArea('Rectangle', { width: 100, height: 200 }))    // 魔术字符串：'Rectangle'
        }
    </script>
</body>

</html>